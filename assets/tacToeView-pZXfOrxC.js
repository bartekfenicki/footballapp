import{_ as X,c as p,a as i,w as x,v as O,b as D,t as V,F as Y,r as Z,d as c,o as $,e as ee,p as f,f as te,g as ae,h as d,i as le}from"./index-OKIyse-g.js";import{A as ne}from"./autoInput-cgehH7BL.js";const oe={components:{AutoInput:ne},setup(){const g=c({name:"",symbol:"P1"}),o=c({name:"",symbol:"P2"}),w=c(g.value),a=c(!1),_=c(null),S=c(15),u=c([]),s=e=>[...e].sort(()=>Math.random()-.5);let m;$(()=>{});const b=c([]),T=c([]),E=ee(()=>f.map(e=>e.name)),R=e=>f.find(t=>t.name===e),M=c(new Set),N=new Map;for(const e of f){const t=[e.current_club,...e.previous_clubs];for(const l of t){const n=`${l}|||${e.nationality}`;N.has(n)||N.set(n,[]),N.get(n).push(e.name)}}console.log(N);const W=[...new Set(f.flatMap(e=>[e.current_club,...e.previous_clubs]))],P=[...new Set(f.map(e=>e.nationality))].reduce((e,t)=>(e[t]=[...new Set(f.filter(l=>l.nationality===t).flatMap(l=>[l.current_club,...l.previous_clubs]))],e),{});console.log(P);const A=W.reduce((e,t)=>(e[t]=[...new Set(f.filter(l=>[l.current_club,...l.previous_clubs].includes(t)).map(l=>l.nationality))],e),{});console.log(A);const k=[],B=Object.keys(A);for(let e=0;e<B.length;e++){const t=B[e],l=new Set(A[t]);for(let n=e+1;n<B.length;n++){const r=B[n],v=new Set(A[r]);[...l].filter(y=>v.has(y)).length>=3&&(k.includes(t)||k.push(t),k.includes(r)||k.push(r))}}console.log(k);const C=[],I=Object.keys(P);for(let e=0;e<I.length;e++){const t=I[e],l=new Set(P[t]);for(let n=e+1;n<I.length;n++){const r=I[n],v=new Set(P[r]);[...l].filter(y=>v.has(y)).length>=3&&(C.includes(t)||C.push(t),C.includes(r)||C.push(r))}}console.log(C);function q(){for(let t=0;t<1e3;t++){const l=s(k).slice(0,3),n=s(C).slice(0,3),r=new Set;let v=!0;for(let h=0;h<3;h++){for(let y=0;y<3;y++){const G=`${l[y]}|||${n[h]}`,j=s(N.get(G)||[]).filter(Q=>!r.has(Q));if(j.length===0){v=!1;break}r.add(j[0])}if(!v)break}if(v){b.value=l,T.value=n;return}}alert("Couldn't generate a valid 3x3 grid. Add more player diversity."),a.value=!1}const L=e=>{const t=Math.floor(e/3),l=e%3,n=T.value[l]||"?",r=b.value[t]||"?";return`${n} | ${r}`},z=()=>{if(!g.value.name||!o.value.name){alert("Both players must enter names.");return}if(!f){alert("Not enough player data loaded to start the game.");return}q(),u.value=Array.from({length:9},()=>({input:"",played:null})),w.value=g.value,a.value=!0,F()},F=()=>{clearInterval(m),S.value=15,m=setInterval(()=>{S.value--,S.value===0&&U()},1e3)},U=()=>{w.value=w.value===g.value?o.value:g.value,F()},H=(e,t)=>{const l=u.value[e];if(l.played||_.value)return;const n=R(t);if(!n){alert("Invalid player");return}if(M.value.has(t)){alert("This player has already been used in another cell.");return}const r=Math.floor(e/3),v=e%3,h=[n.current_club,...n.previous_clubs].includes(b.value[r]),y=n.nationality===T.value[v];h&&y?(l.played=t,M.value.add(t),clearInterval(m),J()?_.value=w.value.name:u.value.every(G=>G.played)?_.value="Draw":U()):alert("Player does not match category requirements.")},J=()=>[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]].some(([t,l,n])=>u.value[t].played&&u.value[t].played===u.value[l].played&&u.value[t].played===u.value[n].played),K=()=>{u.value=[],_.value=null,M.value.clear(),a.value=!1,clearInterval(m)};return te(()=>clearInterval(m)),{player1:g,player2:o,currentPlayer:w,gameStarted:a,board:u,winner:_,timer:S,playerNames:E,startGame:z,resetGame:K,makeMove:H,getCategory:L,usedPlayers:M}}},se={class:"game-container"},re={key:0,class:"setup"},ue={key:1,class:"game"},ie={class:"board"},ce={class:"cell-clue"},de={key:1,class:"cell-value"},me={key:0},ve={key:1};function ye(g,o,w,a,_,S){const u=ae("auto-input");return d(),p("div",se,[a.gameStarted?(d(),p("div",ue,[i("h2",null,V(a.currentPlayer.name)+"'s turn",1),i("p",null,"Time left: "+V(a.timer)+"s",1),i("div",ie,[(d(!0),p(Y,null,Z(a.board,(s,m)=>(d(),p("div",{key:m,class:"cell"},[i("div",ce,V(a.getCategory(m)),1),!a.winner&&!s.played?(d(),le(u,{key:0,suggestions:a.playerNames,modelValue:s.input,"onUpdate:modelValue":b=>s.input=b,onSubmitted:b=>a.makeMove(m,b)},null,8,["suggestions","modelValue","onUpdate:modelValue","onSubmitted"])):(d(),p("div",de,V(s.played),1))]))),128))]),a.winner&&a.winner!=="Draw"?(d(),p("p",me,"Winner: "+V(a.winner),1)):D("",!0),a.winner==="Draw"?(d(),p("p",ve,"It's a Draw!")):D("",!0),a.winner?(d(),p("button",{key:2,onClick:o[3]||(o[3]=(...s)=>a.resetGame&&a.resetGame(...s))},"Restart")):D("",!0)])):(d(),p("div",re,[o[6]||(o[6]=i("h2",null,"Football Tic Tac Toe Setup",-1)),i("div",null,[o[4]||(o[4]=i("label",null,"Player 1 Name:",-1)),x(i("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>a.player1.name=s),type:"text",placeholder:"Enter name"},null,512),[[O,a.player1.name]])]),i("div",null,[o[5]||(o[5]=i("label",null,"Player 2 Name:",-1)),x(i("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>a.player2.name=s),type:"text",placeholder:"Enter name"},null,512),[[O,a.player2.name]])]),i("button",{onClick:o[2]||(o[2]=(...s)=>a.startGame&&a.startGame(...s))},"Start Game")]))])}const he=X(oe,[["render",ye],["__scopeId","data-v-7413a8e2"]]);export{he as default};
